"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1946],{1946:(e,t,r)=>{r.d(t,{UU:()=>th});var s=r(3824),i=r(8180),n=r(8390),o=r(7889),a=r(3437),u=r(4486),c=r(3458),l=r(9483),h=r(3992),d=r(9527),p=r(4986),f=r(3667),g=r(7832),y=r(3125),m=r(3342),w=r(3411),v=r(9292),b=r(1661),q=r(4756),E=r(5604),$=r(8779),R=r(8517),I=r(3727);class j extends Error{response;statusCode=400;responseBody;details;constructor(e){let t=x(e);super(t.message),Object.assign(this,t)}}class C extends Error{response;statusCode=500;responseBody;details;constructor(e){let t=x(e);super(t.message),Object.assign(this,t)}}function x(e){var t,r,s;let i=e.body,n={response:e,statusCode:e.statusCode,responseBody:(t=i,-1!==(e.headers["content-type"]||"").toLowerCase().indexOf("application/json")?JSON.stringify(t,null,2):t),message:"",details:void 0};if(i.error&&i.message)return n.message=`${i.error} - ${i.message}`,n;if(A(r=i)&&A(r.error)&&"mutationError"===r.error.type&&"string"==typeof r.error.description||A(s=i)&&A(s.error)&&"actionError"===s.error.type&&"string"==typeof s.error.description){let e=i.error.items||[],t=e.slice(0,5).map(e=>e.error?.description).filter(Boolean),r=t.length?`:
- ${t.join(`
- `)}`:"";return e.length>5&&(r+=`
...and ${e.length-5} more`),n.message=`${i.error.description}${r}`,n.details=i.error,n}return i.error&&i.error.description?(n.message=i.error.description,n.details=i.error):n.message=i.error||i.message||function(e){let t=e.statusMessage?` ${e.statusMessage}`:"";return`${e.method}-request to ${e.url} resulted in HTTP ${e.statusCode}${t}`}(e),n}function A(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}class T extends Error{projectId;addOriginUrl;constructor({projectId:e}){super("CorsOriginError"),this.name="CorsOriginError",this.projectId=e;let t=new URL(`https://sanity.io/manage/project/${e}/api`);if("u">typeof location){let{origin:e}=location;t.searchParams.set("cors","add"),t.searchParams.set("origin",e),this.addOriginUrl=t,this.message=`The current origin is not allowed to connect to the Live Content API. Add it here: ${t}`}else this.message=`The current origin is not allowed to connect to the Live Content API. Change your configuration here: ${t}`}}let D={onResponse:e=>{if(e.statusCode>=500)throw new C(e);if(e.statusCode>=400)throw new j(e);return e}};function S(e){return(0,s.af)([(0,i.L5)({shouldRetry:O}),...e,function(){let e={};return{onResponse:t=>{let r=t.headers["x-sanity-warning"];for(let t of Array.isArray(r)?r:[r])!t||e[t]||(e[t]=!0,console.warn(t));return t}}}(),(0,i.UX)(),(0,i.Yf)(),(0,i.qB)(),D,(0,i.sH)({implementation:n.c})])}function O(e,t,r){if(0===r.maxRetries)return!1;let s="GET"===r.method||"HEAD"===r.method,n=(r.uri||r.url).startsWith("/data/query"),o=e.response&&(429===e.response.statusCode||502===e.response.statusCode||503===e.response.statusCode);return(!!s||!!n)&&!!o||i.L5.shouldRetry(e,t,r)}function P(e){return"https://www.sanity.io/help/"+e}let _=["image","file"],M=["before","after","replace"],U=e=>{if(!/^(~[a-z0-9]{1}[-\w]{0,63}|[a-z0-9]{1}[-\w]{0,63})$/.test(e))throw Error("Datasets can only contain lowercase characters, numbers, underscores and dashes, and start with tilde, and be maximum 64 characters")},k=e=>{if(!/^[-a-z0-9]+$/i.test(e))throw Error("`projectId` can only contain only a-z, 0-9 and dashes")},N=e=>{if(-1===_.indexOf(e))throw Error(`Invalid asset type: ${e}. Must be one of ${_.join(", ")}`)},z=(e,t)=>{if(null===t||"object"!=typeof t||Array.isArray(t))throw Error(`${e}() takes an object of properties`)},L=(e,t)=>{if("string"!=typeof t||!/^[a-z0-9_][a-z0-9_.-]{0,127}$/i.test(t)||t.includes(".."))throw Error(`${e}(): "${t}" is not a valid document ID`)},H=(e,t)=>{if(!t._id)throw Error(`${e}() requires that the document contains an ID ("_id" property)`);L(e,t._id)},B=(e,t,r)=>{let s="insert(at, selector, items)";if(-1===M.indexOf(e)){let e=M.map(e=>`"${e}"`).join(", ");throw Error(`${s} takes an "at"-argument which is one of: ${e}`)}if("string"!=typeof t)throw Error(`${s} takes a "selector"-argument which must be a string`);if(!Array.isArray(r))throw Error(`${s} takes an "items"-argument which must be an array`)},V=e=>{if(!e.dataset)throw Error("`dataset` must be provided to perform queries");return e.dataset||""},W=e=>{if("string"!=typeof e||!/^[a-z0-9._-]{1,75}$/i.test(e))throw Error("Tag can only contain alphanumeric characters, underscores, dashes and dots, and be between one and 75 characters long.");return e},F=e=>{if(!e["~experimental_resource"])throw Error("`resource` must be provided to perform resource queries");let{type:t,id:r}=e["~experimental_resource"];switch(t){case"dataset":if(2!==r.split(".").length)throw Error('Dataset resource ID must be in the format "project.dataset"');return;case"dashboard":case"media-library":case"canvas":return;default:throw Error(`Unsupported resource type: ${t.toString()}`)}},G=(e,t)=>{if(t["~experimental_resource"])throw Error(`\`${e}\` does not support resource-based operations`)},Y=e=>(function(e){let t=!1,r;return(...s)=>(t||(r=e(...s),t=!0),r)})((...t)=>console.warn(e.join(" "),...t)),J=Y(["Because you set `withCredentials` to true, we will override your `useCdn`","setting to be false since (cookie-based) credentials are never set on the CDN"]),Q=Y(["Since you haven't set a value for `useCdn`, we will deliver content using our","global, edge-cached API-CDN. If you wish to have content delivered faster, set","`useCdn: false` to use the Live API. Note: You may incur higher costs using the live API."]),X=Y(["The Sanity client is configured with the `perspective` set to `drafts` or `previewDrafts`, which doesn't support the API-CDN.","The Live API will be used instead. Set `useCdn: false` in your configuration to hide this warning."]),K=Y(["The `previewDrafts` perspective has been renamed to  `drafts` and will be removed in a future API version"]),Z=Y(["You have configured Sanity client to use a token in the browser. This may cause unintentional security issues.",`See ${P("js-client-browser-token")} for more information and how to hide this warning.`]),ee=Y(["You have configured Sanity client to use a token, but also provided `withCredentials: true`.","This is no longer supported - only token will be used - remove `withCredentials: true`."]),et=Y(["Using the Sanity client without specifying an API version is deprecated.",`See ${P("js-client-api-version")}`]),er=(Y(["The default export of @sanity/client has been deprecated. Use the named export `createClient` instead."]),{apiHost:"https://api.sanity.io",apiVersion:"1",useProjectHostname:!0,stega:{enabled:!1}}),es=["localhost","127.0.0.1","0.0.0.0"],ei=e=>-1!==es.indexOf(e);function en(e){if(Array.isArray(e)&&e.length>1&&e.includes("raw"))throw TypeError('Invalid API perspective value: "raw". The raw-perspective can not be combined with other perspectives')}let eo=(e,t)=>{let r={...t,...e,stega:{..."boolean"==typeof t.stega?{enabled:t.stega}:t.stega||er.stega,..."boolean"==typeof e.stega?{enabled:e.stega}:e.stega||{}}};r.apiVersion||et();let s={...er,...r},i=s.useProjectHostname&&!s["~experimental_resource"];if(typeof Promise>"u"){let e=P("js-client-promise-polyfill");throw Error(`No native Promise-implementation found, polyfill needed - see ${e}`)}if(i&&!s.projectId)throw Error("Configuration must contain `projectId`");if(s["~experimental_resource"]&&F(s),"u">typeof s.perspective&&en(s.perspective),"encodeSourceMap"in s)throw Error("It looks like you're using options meant for '@sanity/preview-kit/client'. 'encodeSourceMap' is not supported in '@sanity/client'. Did you mean 'stega.enabled'?");if("encodeSourceMapAtPath"in s)throw Error("It looks like you're using options meant for '@sanity/preview-kit/client'. 'encodeSourceMapAtPath' is not supported in '@sanity/client'. Did you mean 'stega.filter'?");if("boolean"!=typeof s.stega.enabled)throw Error(`stega.enabled must be a boolean, received ${s.stega.enabled}`);if(s.stega.enabled&&void 0===s.stega.studioUrl)throw Error("stega.studioUrl must be defined when stega.enabled is true");if(s.stega.enabled&&"string"!=typeof s.stega.studioUrl&&"function"!=typeof s.stega.studioUrl)throw Error(`stega.studioUrl must be a string or a function, received ${s.stega.studioUrl}`);let n="u">typeof window&&window.location&&window.location.hostname,o=n&&ei(window.location.hostname),a=!!s.token;s.withCredentials&&a&&(ee(),s.withCredentials=!1),n&&o&&a&&!0!==s.ignoreBrowserTokenWarning?Z():typeof s.useCdn>"u"&&Q(),i&&k(s.projectId),s.dataset&&U(s.dataset),"requestTagPrefix"in s&&(s.requestTagPrefix=s.requestTagPrefix?W(s.requestTagPrefix).replace(/\.+$/,""):void 0),s.apiVersion=`${s.apiVersion}`.replace(/^v/,""),s.isDefaultApi=s.apiHost===er.apiHost,!0===s.useCdn&&s.withCredentials&&J(),s.useCdn=!1!==s.useCdn&&!s.withCredentials,function(e){if("1"===e||"X"===e)return;let t=new Date(e);if(!(/^\d{4}-\d{2}-\d{2}$/.test(e)&&t instanceof Date&&t.getTime()>0))throw Error("Invalid API version string, expected `1` or date in format `YYYY-MM-DD`")}(s.apiVersion);let u=s.apiHost.split("://",2),c=u[0],l=u[1],h=s.isDefaultApi?"apicdn.sanity.io":l;return i?(s.url=`${c}://${s.projectId}.${l}/v${s.apiVersion}`,s.cdnUrl=`${c}://${s.projectId}.${h}/v${s.apiVersion}`):(s.url=`${s.apiHost}/v${s.apiVersion}`,s.cdnUrl=s.url),s};class ea extends Error{name="ConnectionFailedError"}class eu extends Error{name="DisconnectError";reason;constructor(e,t,r={}){super(e,r),this.reason=t}}class ec extends Error{name="ChannelError";data;constructor(e,t){super(e),this.data=t}}class el extends Error{name="MessageError";data;constructor(e,t,r={}){super(e,r),this.data=t}}class eh extends Error{name="MessageParseError"}let ed=["channelError","disconnect"];function ep(e,t){return(0,o.v)(()=>{let t=e();return(0,a.A)(t)?t:(0,u.of)(t)}).pipe((0,c.Z)(e=>{var r,s;return r=e,s=t,new n.c(e=>{let t=s.includes("open"),i=s.includes("reconnect");function n(t){if("data"in t){let[r,s]=ef(t);e.error(r?new eh("Unable to parse EventSource error message",{cause:s}):new el((s?.data).message,s));return}r.readyState===r.CLOSED?e.error(new ea("EventSource connection failed")):i&&e.next({type:"reconnect"})}function o(){e.next({type:"open"})}function a(t){var r;let[s,i]=ef(t);return s?void e.error(new eh("Unable to parse EventSource message",{cause:s})):"channelError"===t.type?void e.error(new ec((r=i?.data).error?r.error.description?r.error.description:"string"==typeof r.error?r.error:JSON.stringify(r.error,null,2):r.message||"Unknown listener error",i.data)):"disconnect"===t.type?void e.error(new eu(`Server disconnected client: ${i.data?.reason||"unknown error"}`)):void e.next({type:t.type,id:t.lastEventId,...i.data?{data:i.data}:{}})}r.addEventListener("error",n),t&&r.addEventListener("open",o);let u=[...new Set([...ed,...s])].filter(e=>"error"!==e&&"open"!==e&&"reconnect"!==e);return u.forEach(e=>r.addEventListener(e,a)),()=>{r.removeEventListener("error",n),t&&r.removeEventListener("open",o),u.forEach(e=>r.removeEventListener(e,a)),r.close()}})}))}function ef(e){try{let t="string"==typeof e.data&&JSON.parse(e.data);return[null,{type:e.type,id:e.lastEventId,...!function(e){for(let t in e)return!1;return!0}(t)?{data:t}:{}}]}catch(e){return[e,null]}}function eg(e){if("string"==typeof e)return{id:e};if(Array.isArray(e))return{query:"*[_id in $ids]",params:{ids:e}};if("object"==typeof e&&null!==e&&"query"in e&&"string"==typeof e.query)return"params"in e&&"object"==typeof e.params&&null!==e.params?{query:e.query,params:e.params}:{query:e.query};let t=["* Document ID (<docId>)","* Array of document IDs","* Object containing `query`"].join(`
`);throw Error(`Unknown selection - must be one of:

${t}`)}class ey{selection;operations;constructor(e,t={}){this.selection=e,this.operations=t}set(e){return this._assign("set",e)}setIfMissing(e){return this._assign("setIfMissing",e)}diffMatchPatch(e){return z("diffMatchPatch",e),this._assign("diffMatchPatch",e)}unset(e){if(!Array.isArray(e))throw Error("unset(attrs) takes an array of attributes to unset, non-array given");return this.operations=Object.assign({},this.operations,{unset:e}),this}inc(e){return this._assign("inc",e)}dec(e){return this._assign("dec",e)}insert(e,t,r){return B(e,t,r),this._assign("insert",{[e]:t,items:r})}append(e,t){return this.insert("after",`${e}[-1]`,t)}prepend(e,t){return this.insert("before",`${e}[0]`,t)}splice(e,t,r,s){let i=t<0?t-1:t,n=typeof r>"u"||-1===r?-1:Math.max(0,t+r),o=`${e}[${i}:${i<0&&n>=0?"":n}]`;return this.insert("replace",o,s||[])}ifRevisionId(e){return this.operations.ifRevisionID=e,this}serialize(){return{...eg(this.selection),...this.operations}}toJSON(){return this.serialize()}reset(){return this.operations={},this}_assign(e,t,r=!0){return z(e,t),this.operations=Object.assign({},this.operations,{[e]:Object.assign({},r&&this.operations[e]||{},t)}),this}_set(e,t){return this._assign(e,t,!1)}}class em extends ey{#e;constructor(e,t,r){super(e,t),this.#e=r}clone(){return new em(this.selection,{...this.operations},this.#e)}commit(e){if(!this.#e)throw Error("No `client` passed to patch, either provide one or pass the patch to a clients `mutate()` method");let t=Object.assign({returnFirst:"string"==typeof this.selection,returnDocuments:!0},e);return this.#e.mutate({patch:this.serialize()},t)}}class ew extends ey{#e;constructor(e,t,r){super(e,t),this.#e=r}clone(){return new ew(this.selection,{...this.operations},this.#e)}commit(e){if(!this.#e)throw Error("No `client` passed to patch, either provide one or pass the patch to a clients `mutate()` method");let t=Object.assign({returnFirst:"string"==typeof this.selection,returnDocuments:!0},e);return this.#e.mutate({patch:this.serialize()},t)}}let ev={returnDocuments:!1};class eb{operations;trxId;constructor(e=[],t){this.operations=e,this.trxId=t}create(e){return z("create",e),this._add({create:e})}createIfNotExists(e){let t="createIfNotExists";return z(t,e),H(t,e),this._add({[t]:e})}createOrReplace(e){let t="createOrReplace";return z(t,e),H(t,e),this._add({[t]:e})}delete(e){return L("delete",e),this._add({delete:{id:e}})}transactionId(e){return e?(this.trxId=e,this):this.trxId}serialize(){return[...this.operations]}toJSON(){return this.serialize()}reset(){return this.operations=[],this}_add(e){return this.operations.push(e),this}}class eq extends eb{#e;constructor(e,t,r){super(e,r),this.#e=t}clone(){return new eq([...this.operations],this.#e,this.trxId)}commit(e){if(!this.#e)throw Error("No `client` passed to transaction, either provide one or pass the transaction to a clients `mutate()` method");return this.#e.mutate(this.serialize(),Object.assign({transactionId:this.trxId},ev,e||{}))}patch(e,t){let r="function"==typeof t,s="string"!=typeof e&&e instanceof ew,i="object"==typeof e&&("query"in e||"id"in e);if(s)return this._add({patch:e.serialize()});if(r){let r=t(new ew(e,{},this.#e));if(!(r instanceof ew))throw Error("function passed to `patch()` must return the patch");return this._add({patch:r.serialize()})}if(i){let r=new ew(e,t||{},this.#e);return this._add({patch:r.serialize()})}return this._add({patch:{id:e,...t}})}}class eE extends eb{#e;constructor(e,t,r){super(e,r),this.#e=t}clone(){return new eE([...this.operations],this.#e,this.trxId)}commit(e){if(!this.#e)throw Error("No `client` passed to transaction, either provide one or pass the transaction to a clients `mutate()` method");return this.#e.mutate(this.serialize(),Object.assign({transactionId:this.trxId},ev,e||{}))}patch(e,t){let r="function"==typeof t;if("string"!=typeof e&&e instanceof em)return this._add({patch:e.serialize()});if(r){let r=t(new em(e,{},this.#e));if(!(r instanceof em))throw Error("function passed to `patch()` must return the patch");return this._add({patch:r.serialize()})}return this._add({patch:{id:e,...t}})}}let e$=({query:e,params:t={},options:r={}})=>{let s=new URLSearchParams,{tag:i,includeMutations:n,returnQuery:o,...a}=r;for(let[r,n]of(i&&s.append("tag",i),s.append("query",e),Object.entries(t)))s.append(`$${r}`,JSON.stringify(n));for(let[e,t]of Object.entries(a))t&&s.append(e,`${t}`);return!1===o&&s.append("returnQuery","false"),!1===n&&s.append("includeMutations","false"),`?${s}`},eR=(e,t)=>!1===e?void 0:typeof e>"u"?t:e,eI=(e={})=>({dryRun:e.dryRun,returnIds:!0,returnDocuments:eR(e.returnDocuments,!0),visibility:e.visibility||"sync",autoGenerateArrayKeys:e.autoGenerateArrayKeys,skipCrossDatasetReferenceValidation:e.skipCrossDatasetReferenceValidation}),ej=e=>"response"===e.type,eC=e=>e.body,ex=(e,t)=>e.reduce((e,r)=>(e[t(r)]=r,e),Object.create(null));function eA(e,t,s,i,n={},o={}){let a="stega"in o?{...s||{},..."boolean"==typeof o.stega?{enabled:o.stega}:o.stega||{}}:s,u=a.enabled?(0,E.Q)(n):n,c=!1===o.filterResponse?e=>e:e=>e.result,{cache:h,next:d,...p}={useAbortSignal:"u">typeof o.signal,resultSourceMap:a.enabled?"withKeyArraySelector":o.resultSourceMap,...o,returnQuery:!1===o.filterResponse&&!1!==o.returnQuery},f=eU(e,t,"query",{query:i,params:u},"u">typeof h||"u">typeof d?{...p,fetch:{cache:h,next:d}}:p);return a.enabled?f.pipe((0,$.v)((0,l.H)(r.e(8570).then(r.bind(r,8570)).then(function(e){return e.stegaEncodeSourceMap$1}).then(({stegaEncodeSourceMap:e})=>e))),(0,R.T)(([e,t])=>{let r=t(e.result,e.resultSourceMap,a);return c({...e,result:r})})):f.pipe((0,R.T)(c))}function eT(e,t,r,s={}){let i={uri:eY(e,"doc",r),json:!0,tag:s.tag,signal:s.signal};return eF(e,t,i).pipe((0,I.p)(ej),(0,R.T)(e=>e.body.documents&&e.body.documents[0]))}function eD(e,t,r,s={}){let i={uri:eY(e,"doc",r.join(",")),json:!0,tag:s.tag,signal:s.signal};return eF(e,t,i).pipe((0,I.p)(ej),(0,R.T)(e=>{let t=ex(e.body.documents||[],e=>e._id);return r.map(e=>t[e]||null)}))}function eS(e,t,r,s){return H("createIfNotExists",r),ek(e,t,r,"createIfNotExists",s)}function eO(e,t,r,s){return H("createOrReplace",r),ek(e,t,r,"createOrReplace",s)}function eP(e,t,r,s){return eU(e,t,"mutate",{mutations:[{delete:eg(r)}]},s)}function e_(e,t,r,s){let i;return eU(e,t,"mutate",{mutations:Array.isArray(i=r instanceof ew||r instanceof em?{patch:r.serialize()}:r instanceof eq||r instanceof eE?r.serialize():r)?i:[i],transactionId:s&&s.transactionId||void 0},s)}function eM(e,t,r,s){let i=Array.isArray(r)?r:[r],n=s&&s.transactionId||void 0;return eU(e,t,"actions",{actions:i,transactionId:n,skipCrossDatasetReferenceValidation:s&&s.skipCrossDatasetReferenceValidation||void 0,dryRun:s&&s.dryRun||void 0},s)}function eU(e,t,r,s,i={}){let n="mutate"===r,o="actions"===r,a=n||o?"":e$(s),u=!n&&!o&&a.length<11264,c=u?a:"",l=i.returnFirst,{timeout:h,token:d,tag:p,headers:f,returnQuery:g,lastLiveEventId:y,cacheMode:m}=i,w={method:u?"GET":"POST",uri:eY(e,r,c),json:!0,body:u?void 0:s,query:n&&eI(i),timeout:h,headers:f,token:d,tag:p,returnQuery:g,perspective:i.perspective,resultSourceMap:i.resultSourceMap,lastLiveEventId:Array.isArray(y)?y[0]:y,cacheMode:m,canUseCdn:"query"===r,signal:i.signal,fetch:i.fetch,useAbortSignal:i.useAbortSignal,useCdn:i.useCdn};return eF(e,t,w).pipe((0,I.p)(ej),(0,R.T)(eC),(0,R.T)(e=>{if(!n)return e;let t=e.results||[];if(i.returnDocuments)return l?t[0]&&t[0].document:t.map(e=>e.document);let r=l?t[0]&&t[0].id:t.map(e=>e.id);return{transactionId:e.transactionId,results:t,[l?"documentId":"documentIds"]:r}}))}function ek(e,t,r,s,i={}){return eU(e,t,"mutate",{mutations:[{[s]:r}]},Object.assign({returnFirst:!0,returnDocuments:!0},i))}let eN=e=>void 0!==e.config().dataset&&void 0!==e.config().projectId||void 0!==e.config()["~experimental_resource"],ez=(e,t)=>eN(e)&&t.startsWith(eY(e,"query")),eL=(e,t)=>eN(e)&&t.startsWith(eY(e,"mutate")),eH=(e,t)=>eN(e)&&t.startsWith(eY(e,"doc","")),eB=(e,t)=>eN(e)&&t.startsWith(eY(e,"listen")),eV=(e,t)=>eN(e)&&t.startsWith(eY(e,"history","")),eW=(e,t)=>t.startsWith("/data/")||ez(e,t)||eL(e,t)||eH(e,t)||eB(e,t)||eV(e,t);function eF(e,t,r){var s;let i=r.url||r.uri,o=e.config(),a=typeof r.canUseCdn>"u"?["GET","HEAD"].indexOf(r.method||"GET")>=0&&eW(e,i):r.canUseCdn,u=(r.useCdn??o.useCdn)&&a,c=r.tag&&o.requestTagPrefix?[o.requestTagPrefix,r.tag].join("."):r.tag||o.requestTagPrefix;if(c&&null!==r.tag&&(r.query={tag:W(c),...r.query}),["GET","HEAD","POST"].indexOf(r.method||"GET")>=0&&ez(e,i)){let e=r.resultSourceMap??o.resultSourceMap;void 0!==e&&!1!==e&&(r.query={resultSourceMap:e,...r.query});let t=r.perspective||o.perspective;"u">typeof t&&("previewDrafts"===t&&K(),en(t),r.query={perspective:Array.isArray(t)?t.join(","):t,...r.query},(Array.isArray(t)&&t.length>0||"previewDrafts"===t||"drafts"===t)&&u&&(u=!1,X())),r.lastLiveEventId&&(r.query={...r.query,lastLiveEventId:r.lastLiveEventId}),!1===r.returnQuery&&(r.query={returnQuery:"false",...r.query}),u&&"noStale"==r.cacheMode&&(r.query={cacheMode:"noStale",...r.query})}let l=function(e,t={}){let r={},s=t.token||e.token;s&&(r.Authorization=`Bearer ${s}`),t.useGlobalApi||e.useProjectHostname||!e.projectId||(r["X-Sanity-Project-ID"]=e.projectId);let i=!!(typeof t.withCredentials>"u"?e.withCredentials:t.withCredentials),n=typeof t.timeout>"u"?e.timeout:t.timeout;return Object.assign({},t,{headers:Object.assign({},r,t.headers||{}),timeout:typeof n>"u"?3e5:n,proxy:t.proxy||e.proxy,json:!0,withCredentials:i,fetch:"object"==typeof t.fetch&&"object"==typeof e.fetch?{...e.fetch,...t.fetch}:t.fetch||e.fetch})}(o,Object.assign({},r,{url:eJ(e,i,u)})),h=new n.c(e=>t(l,o.requester).subscribe(e));return r.signal?h.pipe((s=r.signal,e=>new n.c(t=>{let r=()=>t.error(function(e){if(eQ)return new DOMException(e?.reason??"The operation was aborted.","AbortError");let t=Error(e?.reason??"The operation was aborted.");return t.name="AbortError",t}(s));if(s&&s.aborted)return void r();let i=e.subscribe(t);return s.addEventListener("abort",r),()=>{s.removeEventListener("abort",r),i.unsubscribe()}}))):h}function eG(e,t,r){return eF(e,t,r).pipe((0,I.p)(e=>"response"===e.type),(0,R.T)(e=>e.body))}function eY(e,t,r){let s=e.config();if(s["~experimental_resource"]){F(s);let e=eX(s),i=void 0!==r?`${t}/${r}`:t;return`${e}/${i}`.replace(/\/($|\?)/,"$1")}let i=V(s),n=`/${t}/${i}`;return`/data${void 0!==r?`${n}/${r}`:n}`.replace(/\/($|\?)/,"$1")}function eJ(e,t,r=!1){let{url:s,cdnUrl:i}=e.config();return`${r?i:s}/${t.replace(/^\//,"")}`}let eQ=!!globalThis.DOMException,eX=e=>{if(!e["~experimental_resource"])throw Error("`resource` must be provided to perform resource queries");let{type:t,id:r}=e["~experimental_resource"];switch(t){case"dataset":{let e=r.split(".");if(2!==e.length)throw Error('Dataset ID must be in the format "project.dataset"');return`/projects/${e[0]}/datasets/${e[1]}`}case"canvas":return`/canvases/${r}`;case"media-library":return`/media-libraries/${r}`;case"dashboard":return`/dashboards/${r}`;default:throw Error(`Unsupported resource type: ${t.toString()}`)}};class eK{#e;#t;constructor(e,t){this.#e=e,this.#t=t}upload(e,t,r){return e0(this.#e,this.#t,e,t,r)}}class eZ{#e;#t;constructor(e,t){this.#e=e,this.#t=t}upload(e,t,r){let s=e0(this.#e,this.#t,e,t,r);return(0,h.s)(s.pipe((0,I.p)(e=>"response"===e.type),(0,R.T)(e=>e.body.document)))}}function e0(e,t,r,s,i={}){var n,o;N(r);let a=i.extract||void 0;a&&!a.length&&(a=["none"]);let u=e.config(),c=(n=i,o=s,!(typeof File>"u")&&o instanceof File?Object.assign({filename:!1===n.preserveFilename?void 0:o.name,contentType:o.type},n):n),{tag:l,label:h,title:d,description:p,creditLine:f,filename:g,source:y}=c,m={label:h,title:d,description:p,filename:g,meta:a,creditLine:f};return y&&(m.sourceId=y.id,m.sourceName=y.name,m.sourceUrl=y.url),eF(e,t,{tag:l,method:"POST",timeout:c.timeout||0,uri:function(e,t){let r="image"===t?"images":"files";if(e["~experimental_resource"]){let{type:t,id:s}=e["~experimental_resource"];switch(t){case"dataset":throw Error("Assets are not supported for dataset resources, yet. Configure the client with `{projectId: <projectId>, dataset: <datasetId>}` instead.");case"canvas":return`/canvases/${s}/assets/${r}`;case"media-library":return`/media-libraries/${s}/upload`;case"dashboard":return`/dashboards/${s}/assets/${r}`;default:throw Error(`Unsupported resource type: ${t.toString()}`)}}let s=V(e);return`assets/${r}/${s}`}(u,r),headers:c.contentType?{"Content-Type":c.contentType}:{},query:m,body:s})}var e1=(e,t)=>Object.keys(t).concat(Object.keys(e)).reduce((r,s)=>(r[s]=typeof e[s]>"u"?t[s]:e[s],r),{});let e2=(e,t)=>t.reduce((t,r)=>(typeof e[r]>"u"||(t[r]=e[r]),t),{}),e5=(0,o.v)(()=>r.e(5723).then(r.t.bind(r,5723,19))).pipe((0,R.T)(({default:e})=>e),(0,d.t)(1));function e3(){return function(e){return e.pipe((0,p.W)((e,t)=>e instanceof ea?(0,f.x)((0,u.of)({type:"reconnect"}),(0,g.O)(1e3).pipe((0,c.Z)(()=>t))):(0,y.$)(()=>e)))}}let e9=["includePreviousRevision","includeResult","includeMutations","includeAllVersions","visibility","effectFormat","tag"],e4={includeResult:!0};function e7(e,t,r={}){let{url:s,token:i,withCredentials:n,requestTagPrefix:o}=this.config(),a=r.tag&&o?[o,r.tag].join("."):r.tag,c={...e1(r,e4),tag:a},l=e$({query:e,params:t,options:{tag:a,...e2(c,e9)}}),h=`${s}${eY(this,"listen",l)}`;if(h.length>14800)return(0,y.$)(()=>Error("Query too large for listener"));let d=c.events?c.events:["mutation"],p={};return n&&(p.withCredentials=!0),i&&(p.headers={Authorization:`Bearer ${i}`}),ep(()=>(typeof EventSource>"u"||p.headers?e5:(0,u.of)(EventSource)).pipe((0,R.T)(e=>new e(h,p))),d).pipe(e3(),(0,I.p)(e=>d.includes(e.type)),(0,R.T)(e=>({type:e.type,..."data"in e?e.data:{}})))}let e8="2021-03-25";class e6{#e;constructor(e){this.#e=e}events({includeDrafts:e=!1,tag:t}={}){var r,s,i,o;G("live",this.#e.config());let{projectId:a,apiVersion:l,token:h,withCredentials:d,requestTagPrefix:g}=this.#e.config(),y=l.replace(/^v/,"");if("X"!==y&&y<e8)throw Error(`The live events API requires API version ${e8} or later. The current API version is ${y}. Please update your API version to use this feature.`);if(e&&!h&&!d)throw Error("The live events API requires a token or withCredentials when 'includeDrafts: true'. Please update your client configuration. The token should have the lowest possible access role.");let E=eY(this.#e,"live/events"),$=new URL(this.#e.getUrl(E,!1)),I=t&&g?[g,t].join("."):t;I&&$.searchParams.set("tag",I),e&&$.searchParams.set("includeDrafts","true");let j={};e&&h&&(j.headers={Authorization:`Bearer ${h}`}),e&&d&&(j.withCredentials=!0);let C=`${$.href}::${JSON.stringify(j)}`,x=te.get(C);if(x)return x;let A=ep(()=>(typeof EventSource>"u"||j.headers?e5:(0,u.of)(EventSource)).pipe((0,R.T)(e=>new e($.href,j))),["message","restart","welcome","reconnect","goaway"]).pipe(e3(),(0,R.T)(e=>{if("message"===e.type){let{data:t,...r}=e;return{...r,tags:t.tags}}return e})),D=(s=$,i={method:"OPTIONS",mode:"cors",credentials:j.withCredentials?"include":"omit",headers:j.headers},new n.c(e=>{let t=new AbortController,r=t.signal;return fetch(s,{...i,signal:t.signal}).then(t=>{e.next(t),e.complete()},t=>{r.aborted||e.error(t)}),()=>t.abort()})).pipe((0,c.Z)(()=>q.w),(0,p.W)(()=>{throw new T({projectId:a})})),S=(0,f.x)(D,A).pipe((0,w.j)(()=>te.delete(C)),(o="function"==typeof(r={predicate:e=>"welcome"===e.type})?{predicate:r,...void 0}:r,e=>{let t,r=!1,{predicate:s,...i}=o,a=e.pipe((0,m.M)(e=>{o.predicate(e)&&(r=!0,t=e)}),(0,w.j)(()=>{r=!1,t=void 0}),(0,v.u)(i)),u=new n.c(e=>{r&&e.next(t),e.complete()});return(0,b.h)(a,u)}));return te.set(C,S),S}}let te=new Map;class tt{#e;#t;constructor(e,t){this.#e=e,this.#t=t}create(e,t){return ts(this.#e,this.#t,"PUT",e,t)}edit(e,t){return ts(this.#e,this.#t,"PATCH",e,t)}delete(e){return ts(this.#e,this.#t,"DELETE",e)}list(){return eG(this.#e,this.#t,{uri:"/datasets",tag:null})}}class tr{#e;#t;constructor(e,t){this.#e=e,this.#t=t}create(e,t){return G("dataset",this.#e.config()),(0,h.s)(ts(this.#e,this.#t,"PUT",e,t))}edit(e,t){return G("dataset",this.#e.config()),(0,h.s)(ts(this.#e,this.#t,"PATCH",e,t))}delete(e){return G("dataset",this.#e.config()),(0,h.s)(ts(this.#e,this.#t,"DELETE",e))}list(){return G("dataset",this.#e.config()),(0,h.s)(eG(this.#e,this.#t,{uri:"/datasets",tag:null}))}}function ts(e,t,r,s,i){return G("dataset",e.config()),U(s),eG(e,t,{method:r,uri:`/datasets/${s}`,body:i,tag:null})}class ti{#e;#t;constructor(e,t){this.#e=e,this.#t=t}list(e){G("projects",this.#e.config());let t=e?.includeMembers===!1?"/projects?includeMembers=false":"/projects";return eG(this.#e,this.#t,{uri:t})}getById(e){return G("projects",this.#e.config()),eG(this.#e,this.#t,{uri:`/projects/${e}`})}}class tn{#e;#t;constructor(e,t){this.#e=e,this.#t=t}list(e){G("projects",this.#e.config());let t=e?.includeMembers===!1?"/projects?includeMembers=false":"/projects";return(0,h.s)(eG(this.#e,this.#t,{uri:t}))}getById(e){return G("projects",this.#e.config()),(0,h.s)(eG(this.#e,this.#t,{uri:`/projects/${e}`}))}}class to{#e;#t;constructor(e,t){this.#e=e,this.#t=t}getById(e){return eG(this.#e,this.#t,{uri:`/users/${e}`})}}class ta{#e;#t;constructor(e,t){this.#e=e,this.#t=t}getById(e){return(0,h.s)(eG(this.#e,this.#t,{uri:`/users/${e}`}))}}class tu{assets;datasets;live;projects;users;#r;#t;listen=e7;constructor(e,t=er){this.config(t),this.#t=e,this.assets=new eK(this,this.#t),this.datasets=new tt(this,this.#t),this.live=new e6(this),this.projects=new ti(this,this.#t),this.users=new to(this,this.#t)}clone(){return new tu(this.#t,this.config())}config(e){if(void 0===e)return{...this.#r};if(this.#r&&!1===this.#r.allowReconfigure)throw Error("Existing client instance cannot be reconfigured - use `withConfig(newConfig)` to return a new client");return this.#r=eo(e,this.#r||{}),this}withConfig(e){let t=this.config();return new tu(this.#t,{...t,...e,stega:{...t.stega||{},..."boolean"==typeof e?.stega?{enabled:e.stega}:e?.stega||{}}})}fetch(e,t,r){return eA(this,this.#t,this.#r.stega,e,t,r)}getDocument(e,t){return eT(this,this.#t,e,t)}getDocuments(e,t){return eD(this,this.#t,e,t)}create(e,t){return ek(this,this.#t,e,"create",t)}createIfNotExists(e,t){return eS(this,this.#t,e,t)}createOrReplace(e,t){return eO(this,this.#t,e,t)}delete(e,t){return eP(this,this.#t,e,t)}mutate(e,t){return e_(this,this.#t,e,t)}patch(e,t){return new em(e,t,this)}transaction(e){return new eE(e,this)}action(e,t){return eM(this,this.#t,e,t)}request(e){return eG(this,this.#t,e)}getUrl(e,t){return eJ(this,e,t)}getDataUrl(e,t){return eY(this,e,t)}}class tc{assets;datasets;live;projects;users;observable;#r;#t;listen=e7;constructor(e,t=er){this.config(t),this.#t=e,this.assets=new eZ(this,this.#t),this.datasets=new tr(this,this.#t),this.live=new e6(this),this.projects=new tn(this,this.#t),this.users=new ta(this,this.#t),this.observable=new tu(e,t)}clone(){return new tc(this.#t,this.config())}config(e){if(void 0===e)return{...this.#r};if(this.#r&&!1===this.#r.allowReconfigure)throw Error("Existing client instance cannot be reconfigured - use `withConfig(newConfig)` to return a new client");return this.observable&&this.observable.config(e),this.#r=eo(e,this.#r||{}),this}withConfig(e){let t=this.config();return new tc(this.#t,{...t,...e,stega:{...t.stega||{},..."boolean"==typeof e?.stega?{enabled:e.stega}:e?.stega||{}}})}fetch(e,t,r){return(0,h.s)(eA(this,this.#t,this.#r.stega,e,t,r))}getDocument(e,t){return(0,h.s)(eT(this,this.#t,e,t))}getDocuments(e,t){return(0,h.s)(eD(this,this.#t,e,t))}create(e,t){return(0,h.s)(ek(this,this.#t,e,"create",t))}createIfNotExists(e,t){return(0,h.s)(eS(this,this.#t,e,t))}createOrReplace(e,t){return(0,h.s)(eO(this,this.#t,e,t))}delete(e,t){return(0,h.s)(eP(this,this.#t,e,t))}mutate(e,t){return(0,h.s)(e_(this,this.#t,e,t))}patch(e,t){return new ew(e,t,this)}transaction(e){return new eq(e,this)}action(e,t){return(0,h.s)(eM(this,this.#t,e,t))}request(e){return(0,h.s)(eG(this,this.#t,e))}dataRequest(e,t,r){return(0,h.s)(eU(this,this.#t,e,t,r))}getUrl(e,t){return eJ(this,e,t)}getDataUrl(e,t){return eY(this,e,t)}}let tl=function(e,t){return{requester:S(e),createClient:r=>{let s=S(e);return new t((e,t)=>(t||s)({maxRedirects:0,maxRetries:r.maxRetries,retryDelay:r.retryDelay,...e}),r)}}}([],tc),th=(tl.requester,tl.createClient)}}]);